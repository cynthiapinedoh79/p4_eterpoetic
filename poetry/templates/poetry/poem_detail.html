{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-4">

  <div class="d-flex justify-content-between align-items-start mb-2">
    <div>
      <h2 class="mb-1">{{ poem.title_es|default:poem.title_en }}</h2>
      {% if poem.author %}<p class="text-muted mb-0">{{ poem.author.name|default:poem.author }}</p>{% endif %}
    </div>

    {# Show toggle only if an English translation exists #}
    {% if poem.body_en %}
    <div class="ms-3">
      <div class="btn-group btn-group-sm" role="group" aria-label="Poem language toggle">
        <button id="btn-es" class="btn btn-secondary">ðŸ‡ªðŸ‡¸ ES</button>
        <button id="btn-en" class="btn btn-outline-secondary">ðŸ‡¬ðŸ‡§ EN</button>
      </div>
    </div>
    {% endif %}
  </div>

  <hr>

  <article id="poem-es" lang="es">
    <pre class="mt-3">{{ poem.body_es|default:poem.body_en }}</pre>
  </article>

  {% if poem.body_en %}
  <article id="poem-en" lang="en" style="display:none;">
    <pre class="mt-3">{{ poem.body_en }}</pre>
  </article>
  {% endif %}

</div>
{% endblock %}

{# Load the JS from /static/js/poem_toggle.js #}
{% block extras %}
  <script src="{% static 'js/poem_toggle.js' %}?v=1" defer></script>
{% endblock %}

